<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <title>scala-spring webapp</title>

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
    <script type="text/javascript">

        $(document).ready(function() {

            $("#add").click(function(event) {
                event.preventDefault()
                $.get("/magic/newIOU", {
                    ower : $("#ower").val(),
                    owed : $("#owed").val(),
                    amount : $("#amount").val()
                },
                    writeIOUs)
            })
        })

        function writeIOUs(jsonText) {
            var ious = eval('(' + jsonText + ')')
            var iousDiv = $("#ious")
            iousDiv.children().remove()
            for (var i = 0; i < ious.length; i++) {
                var iou = ious[i]
                iousDiv.append(iou.ower + " owes " + iou.owed + " the sum of $" + iou.amount).append("<br/>")
            }
        }


    </script>

</head>
<body>
<a href="magic/alive">Alive Test</a>

<h1>Add An IOU</h1>
<input id="ower" type="text"> owes
<input id="owed" type="text"> this amount:
<input id="amount" type="text">
<input id="add" type="submit">

<h1>All IOUs</h1>
<div id="ious"></div>
</body>
</html>